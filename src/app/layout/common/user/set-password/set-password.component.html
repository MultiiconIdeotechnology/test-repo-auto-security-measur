<div class="flex flex-col min-w-128 max-w-128 max-h-screen -m-6">

    <!-- Header -->
    <div class="px-6">
        <div class="flex flex-0 items-center justify-between h-14">
            <div class="text-2xl font-bold">Reset Your Login Password</div>
            <div class="primary-text cursor-pointer" (click)="signOut()">
                <span class="font-medium underline">Sign out</span>
            </div>
        </div>
        <mat-divider class="border"></mat-divider>
    </div>

    <div class="px-6 text-lg pt-2 text-primary font-medium truncate">
        {{data.user_name}}
    </div>
    <div class="px-6 text-sm pt-1">
        Need to change password for first time login.
    </div>

    <div class="px-6 pb-6 pt-2">
        <!-- Alert -->
        <fuse-alert class="mt-4" *ngIf="showAlert" [appearance]="'outline'" [showIcon]="false" [type]="alert.type"
            [@shake]="alert.type === 'error'">
            <span [innerHTML]="alert.message"></span>
            <!-- {{alert.message}} -->
        </fuse-alert>

        <!-- Sign in form -->
        <form class="mt-2 space-y-3" [formGroup]="setPassForm">
            <!-- Pass field -->
            <mat-form-field class="w-full">
                <input id="password1" matInput type="password" placeholder="New Password" [formControlName]="'password'"
                    #passwordField pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*]).{8,}$">
                <button mat-icon-button class="relative right-0" type="button"
                    (click)="passwordField.type === 'password' ? passwordField.type = 'text' : passwordField.type = 'password'"
                    matSuffix>
                    <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'password'"
                        [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                    <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'text'"
                        [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
                </button>
                <mat-error *ngIf="setPassForm.get('password').hasError('required')">
                    New Password is required
                </mat-error>
                <mat-error
                    *ngIf="!regex(setPassForm.get('password').value) && !setPassForm.get('password').hasError('required')">
                    New Password must contain 1 upper case, 1 lower case, 1 number & 1 special character and must be 8
                    digits long.
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-full">
                <input id="passwordConfirm1" matInput type="password" placeholder="Confirm password"
                    [formControlName]="'passwordConfirm'" #ConfirmpasswordField
                    pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*]).{8,}$">
                <button mat-icon-button class="relative right-0" type="button"
                    (click)="ConfirmpasswordField.type === 'password' ? ConfirmpasswordField.type = 'text' : ConfirmpasswordField.type = 'password'"
                    matSuffix>
                    <mat-icon class="icon-size-5" *ngIf="ConfirmpasswordField.type === 'password'"
                        [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                    <mat-icon class="icon-size-5" *ngIf="ConfirmpasswordField.type === 'text'"
                        [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
                </button>
                <mat-error *ngIf="setPassForm.get('passwordConfirm').hasError('required')">
                    Confirm Password is required
                </mat-error>
                <mat-error
                    *ngIf="(setPassForm.get('password').value != setPassForm.get('passwordConfirm').value) && !setPassForm.get('passwordConfirm').hasError('required')">
                    Password and Confirm Password do not match.
                </mat-error>
            </mat-form-field>

            <div class="pt-2">
                <button mat-flat-button class=" px-7 w-full" [color]="'primary'" [disabled]="setPassForm.disabled"
                    (click)="setPass()">
                    <span class="white-text tracking-wide" *ngIf="!setPassForm.disabled">
                        Continue
                    </span>
                </button>
            </div>
        </form>
    </div>
</div>