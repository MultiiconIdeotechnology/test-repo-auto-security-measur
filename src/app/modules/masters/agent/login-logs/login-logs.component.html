<div>
    <div class="flex gap-4">

        <!-- <mat-form-field class="justify-center items-center w-full">
            <mat-icon class="icon-size-5 !light-text" matPrefix
                [svgIcon]="'heroicons_outline:magnifying-glass'"></mat-icon>
            <input [formControl]="searchInputControl" [readOnly]="loading" matInput class="text-md !light-text"
                [autocomplete]="'off'" [placeholder]="'Search'" />
        </mat-form-field> -->
        <div class="flex mb-4 ctm_search w-full">
            <input matInput class="w-[97%]" [formControl]="searchInputControl" [autocomplete]="'off'" [placeholder]="'Search'"/>
            <mat-icon class="icon-size-5 " matPrefix [svgIcon]="'heroicons_solid:magnifying-glass'"></mat-icon>
        </div>

        <!-- Date Combo -->
        <div class="w-60 mb-4">
            <div *ngIf="date.value !== DR.setCustomDate" class="w-full flex flex-row justify-between">
                <mat-form-field class="w-full bottom_none">
                    <mat-select name="date" [formControl]="date" #dateRange
                        (selectionChange)="updateDate($event.value)">
                        <mat-option *ngFor="let dr of dateRanges" [value]="dr">{{
                            dr
                            }}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div *ngIf="date.value === DR.setCustomDate" class="w-full flex flex-row items-center space-x-1">
                <mat-form-field class="w-full bottom_none">
                    <mat-date-range-input [rangePicker]="picker" (click)="onRangeInputClicked()">
                        <input matStartDate [formControl]="startDate" placeholder="Start Date" readonly
                            #dateRangeStart />
                        <input matEndDate [formControl]="endDate" placeholder="End Date" readonly #dateRangeEnd
                            (dateInput)="
                            dateRangeChange(dateRangeStart, dateRangeEnd)
                        " />
                    </mat-date-range-input>
                    <mat-datepicker-toggle #sec matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-date-range-picker #picker></mat-date-range-picker>
                </mat-form-field>
                <mat-icon class="icon-size-4 cursor-pointer" (click)="cancleDate()">cancel</mat-icon>
            </div>
        </div>
    </div>

    <div class="overflow-auto flex flex-col max-h-[60vh] rounded border ">
        <div class="flex flex-col overflow-auto max-w-full " [class.hidden]="dataSource.data.length <= 0 && loading">
            <table mat-table [dataSource]="dataSource" class="border-collapse sale-tab" matSort matSortDisableClear
                matSortDirection="desc" matSortActive="loginTime" (matSortChange)="refreshItems()">

                <!-- <ng-container matColumnDef="options">
                    <th mat-header-cell class="font-bold text-md      min-w-15 max-w-15 w-15 text-center"
                        *matHeaderCellDef>
                        #
                    </th>
                    <td mat-cell *matCellDef="let element" class="border min-w-15 max-w-15 cursor-pointer text-center p-0">
                        <button mat-icon-button (click)="$event.stopPropagation()"
                            [matMenuTriggerFor]="optionMenu" class="sticky left-0 ">
                            <mat-icon> more_vert </mat-icon>
                        </button>
                        <mat-menu #optionMenu>
                            <button mat-menu-item>
                                <mat-icon class="mat-18">info</mat-icon>
                                <span style="font-weight: 600;">Info</span>
                            </button>
                        </mat-menu>
                    </td>
                </ng-container> -->

                <ng-container matColumnDef="loginTime">
                    <th mat-header-cell mat-sort-header class="font-bold text-md    min-w-36 max-w-36"
                        *matHeaderCellDef>
                        Date
                    </th>
                    <td mat-cell *matCellDef="let element" class="border-b pt-1 min-w-36 max-w-36">
                        <p class="text-md font-medium truncate pr-1 leading-3">{{ element.loginTime | date :
                            "dd-MM-YYYY"}}
                        </p>
                        <span class="text-primary truncate text-xs">{{ element.loginTime | date : "hh:mm"}}</span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="ip_address">
                    <th mat-header-cell mat-sort-header class="font-bold text-md  min-w-40 max-w-40" *matHeaderCellDef>
                        IP Address
                    </th>
                    <td mat-cell *matCellDef="let element" class="border-b truncate min-w-40 max-w-40"
                        [matTooltip]="element.ip_address">
                        {{element.ip_address || ' - '}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="detail">
                    <th mat-header-cell mat-sort-header class="font-bold text-md w-full" *matHeaderCellDef>
                        Browser
                    </th>
                    <td mat-cell *matCellDef="let element" class="border-b truncate w-full">
                        <span class="max-w-40 truncate min-w-40" [matTooltip]="element.detail">{{element.detail || ' - '}}</span>
                    </td>
                </ng-container>

                <tr class="h-9 min-h-9 sticky top-0 z-10" mat-header-row *matHeaderRowDef="columns; sticky: true"></tr>
                <tr class="h-9 border-0" mat-row *matRowDef="let row; columns: columns"></tr>
            </table>
        </div>
        <div class="min-h-50 flex text-center justify-center items-center" *ngIf="this.dataSource.filteredData.length <= 0">
            <div  class="text-center font-semibold text-lg">
                {{getNodataText()}}
            </div>
        </div>
        <mat-paginator class="second-color z-10 sticky w-full bottom-0 " #paginator [pageSizeOptions]="[5, 10, 25, 100]"
            [pageSize]="10" (page)="refreshItems()" showFirstLastButtons>
        </mat-paginator>
    </div>
</div>