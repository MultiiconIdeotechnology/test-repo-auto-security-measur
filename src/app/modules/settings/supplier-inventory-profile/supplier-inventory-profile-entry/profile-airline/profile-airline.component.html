<div class="p-2">
    <form [formGroup]="airlineForm">
        <div class="grid grid-cols-4 gap-4">

            <mat-form-field class="w-full">
                <mat-label>Supplier</mat-label>
                <mat-select formControlName="supplier_id" required>
                    <mat-option>
                        <ngx-mat-select-search placeholderLabel="Search"
                            noEntriesFoundLabel="'no matching product found'" [formControlName]="'supplierFilter'">
                        </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let ct of SupplierList" [value]="ct.id">{{ct.company_name}}</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>User Type</mat-label>
                <mat-select formControlName="user_type">
                    <mat-option *ngFor="let type of userType" [value]="type">
                        {{ type }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Trip Type</mat-label>
                <mat-select formControlName="trip_type">
                    <mat-option *ngFor="let type of tripTypeList" [value]="type">
                        {{ type }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Route Type</mat-label>
                <mat-select formControlName="route_type">
                    <mat-option *ngFor="let type of routeTypeList" [value]="type">
                        {{ type }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Airline</mat-label>
                <mat-select multiple required formControlName="airline_id" (selectionChange)="clickOtherRoles($event)">
                    <mat-option>
                        <ngx-mat-select-search placeholderLabel="Search"
                            noEntriesFoundLabel="'no matching Airline found'" [formControlName]="'airlineFilter'"
                            (input)="filterAirlineCarrier($event.target.value)">
                        </ngx-mat-select-search>
                    </mat-option>
                    <mat-option value="All" (onSelectionChange)="clickAllRoles($event)">
                        <span class="font-normal">All</span>
                    </mat-option>
                    <mat-option *ngFor="let ct of AirlineList" [value]="ct.id">{{ct.short_code}}</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Fare Class</mat-label>
                <mat-select multiple formControlName="fare_class" (selectionChange)="onFareClassChange($event)">
                    <mat-option [value]="'All'" (onSelectionChange)="onAllFareClassToggle($event)">
                        All
                    </mat-option>
                    <mat-option *ngFor="let item of fareClassList.slice(1)" [value]="item">
                        {{ item }}
                    </mat-option>

                </mat-select>
            </mat-form-field>

            <!--Fare Type Class -->

            <mat-form-field class="w-full">
                <mat-label>Fare Type/Class Visibility</mat-label>
                <mat-select formControlName="fare_type_class_visible_type">
                    <mat-option *ngFor="let type of fareTypeClassVisibleTypeList" [value]="type">
                        {{ type }}
                    </mat-option>
                </mat-select>
            </mat-form-field>


            <mat-form-field class="w-full">
                <mat-label>Fare Type</mat-label>
                <mat-select formControlName="fare_type">
                    <mat-option *ngFor="let fare of fareTypeList" [value]="fare">
                        {{ fare }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Airport Codes</mat-label>
                <mat-select multiple required formControlName="airport_code_id"
                    (selectionChange)="clickOtherCodes($event)">
                    <mat-option>
                        <ngx-mat-select-search placeholderLabel="Search" noEntriesFoundLabel="'no matching City found'"
                            [formControlName]="'airport_code_filter'">
                        </ngx-mat-select-search>
                    </mat-option>
                    <mat-option value="All" (onSelectionChange)="clickAllCodes($event)">
                        <span class="font-normal">All</span>
                    </mat-option>
                    <mat-option *ngFor="let ct of airPortcodeList" [value]="ct.id">{{ct.display_name}}</mat-option>
                </mat-select>
            </mat-form-field>


            <mat-form-field class="w-full">
                <mat-label>Airport Codes Visibility</mat-label>
                <mat-select formControlName="airport_codes_visible_type">
                    <mat-option *ngFor="let type of fareTypeClassVisibleTypeList" [value]="type">
                        {{ type }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill" class="w-full">
                <mat-label>Stops</mat-label>
                <mat-select multiple formControlName="stops" (selectionChange)="onStopsChange($event)">
                    <mat-option [value]="'All'" (onSelectionChange)="onSelectAllStops($event)">
                        All
                    </mat-option>
                    <mat-option *ngFor="let stop of stopList" [value]="stop">
                        {{ stop }} Stop{{ stop > 1 ? 's' : '' }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
           
            <div class="flex flex-row">
                <mat-checkbox class="example-margin ml-[-8px]" formControlName="is_enable">
                   Is Enabled</mat-checkbox>
            </div>

        </div>

        <!-- Save Button -->
        <div class="flex justify-end mt-6">
            <button mat-flat-button color="primary" type="submit">
                Save
            </button>
        </div>
    </form>

    <!-- Divider -->
    <mat-divider class="my-6"></mat-divider>

    <!-- Search & Refresh -->
    <div class="flex justify-between items-center mb-3">
        <div class="flex items-center gap-2">
            <span class="text-sm font-medium">Search:</span>
            <input type="text" pInputText [(ngModel)]="globalFilter"
                (input)="tableRef.filterGlobal($event.target.value, 'contains')" placeholder="Search..."
                class="w-64 h-9 px-2" />
        </div>

        <button class="ml-4" mat-flat-button [color]="'primary'" (click)="onRefresh()" matTooltip="Refresh">
            <mat-icon class="icon-size-4.5" svgIcon="feather:refresh-ccw"></mat-icon>
        </button>

    </div>

    <!-- Table -->
    <p-table #tableRef [value]="dataList" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10, 20, 50]"
        [globalFilterFields]="['supplier', 'usertype', 'triptype']" [scrollable]="true" scrollHeight="300px"
        [resizableColumns]="true" columnResizeMode="fit" styleClass="p-datatable-sm p-datatable-gridlines">
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 60px" class="text-center">#</th>
                <th pResizableColumn>Supplier</th>
                <th pResizableColumn>User Type</th>
                <th pResizableColumn>Is Enable</th>
                <th pResizableColumn>Trip Type</th>

            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-row let-rowIndex="rowIndex">
            <tr>
                <!-- Index -->
                <td class="flex flex-row items-center">
                    <button pButton icon="pi pi-pencil" class="p-button-text p-button-sm text-blue-500"
                        (click)="onEdit(row)"></button>
                    <button pButton icon="pi pi-trash" class="p-button-text p-button-sm text-red-500"
                        (click)="onDelete(row)"></button>
                </td>

                <!-- Data Fields -->
                <td>{{ row.supplier }}</td>
                <td>{{ row.usertype }}</td>
                <td>
                    {{ row.isEnable ? 'True' : 'False' }}
                </td>

                <td>{{ row.triptype }}</td>


            </tr>
        </ng-template>
    </p-table>


</div>