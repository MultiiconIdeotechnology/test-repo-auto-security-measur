<div class="sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden  dark:bg-transparent">

    <!-- Header -->
    <div
        class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between max-sm:sticky max-sm:z-30 max-sm:top-0  dark:bg-gray-900 xl:py-4 py-3 px-6 md:px-8 border-b">
        <!-- Loader -->
        <div class="absolute inset-x-0 bottom-0" *ngIf="isLoading">
            <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
        </div>
        <!-- Title -->
        <!-- <div class="text-4xl font-extrabold tracking-tight">Currency Master</div> -->
        <div
            class=" xl:font-extrabold font-bold tracking-tight max-sm:flex max-sm:w-full max-sm:justify-between">
            <span class="text-3xl">{{module_name}}</span>
            <span class="hidden max-sm:flex">
                <!-- <button class="ml-4" mat-flat-button style="background-color: #5046E5;" (click)="create()">
                    <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>
                    <span class="ml-2 mr-1">Add</span>
                </button> -->
            </span>
        </div>
        <!-- Actions -->
        <div class="flex flex-shrink-0 items-center mt-6 sm:mt-0 sm:ml-4 max-sm:mt-2 max-sm:justify-between">

            <!-- Search -->
            <mat-form-field class="fuse-mat-dense fuse-mat-rounded min-w-64" [subscriptSizing]="'dynamic'">
                <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:magnifying-glass'"></mat-icon>
                <input matInput [formControl]="searchInputControl" [autocomplete]="'off'" [placeholder]="'Search'">
            </mat-form-field>

            <button class="ml-4" mat-flat-button [color]="'primary'" (click)="filter()">
                <mat-icon class="w-10 h-10">filter_alt</mat-icon>
                <span class="">Filter</span>
            </button>

            <button mat-raised-button [color]="'primary'" [matMenuTriggerFor]="menu" class="ml-4">
                <mat-icon class="icon-size-6">more_vert</mat-icon>
            </button>
            <mat-menu #menu>
                <button mat-menu-item (click)="exportExcel()">
                    <mat-icon>arrow_downward</mat-icon>
                    <span>Export Excel</span>
                </button>
            </mat-menu>
          
            <button class="ml-4" mat-flat-button [disabled]="isLoading" (click)="refreshItems()" [color]="'primary'">
                <mat-icon class="icon-size-4.5" svgIcon="feather:refresh-ccw"></mat-icon>
            </button>
        </div>
    </div>

    <!----------------Table----------------->
    <div class="flex flex-col flex-auto overflow-hidden">
        <!-- list -->
        <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden overflow-y-auto overflow-x-auto max-sm:pb-15">
            <ng-container>
                <div class="grid">
                    <!-- Header -->
                    <div class="tbl-grid gridwidth z-10 sticky top-0 grid   py-2 px-6 md:pr-8 pl-0 shadow text-md font-semibold bg-card"
                        matSort
                        matSortDisableClear
                        (matSortChange)="refreshItems()">
                        <div style="text-align: center" class="sticky left-0 bg-card z-99">
                            #
                        </div>

                        <ng-container *ngFor="let col of columns">
                            <div *ngIf="col.is_sortable"
                                [mat-sort-header]="col.key"
                                [class]="'pl-4 ' + col.class">
                                {{ col.name }}
                            </div>
                            <div *ngIf="!col.is_sortable" [class]="'pl-4 ' + col.class">
                                {{ col.name }}
                            </div>
                        </ng-container>
                    </div>
                    <!-- Rows -->
                    <ng-container *ngIf="dataList.length > 0; else noGridItems">
                        <ng-container *ngFor="let ListItem of dataList">
                            <div
                                class="tbl-grid gridwidth grid items-center   px-6 md:pr-8 border-b pl-0 cursor-pointer"
                            >
                                <button
                                    mat-icon-button
                                    (click)="$event.stopPropagation()"
                                    [matMenuTriggerFor]="optionMenu"
                                    class="sticky left-0 bg-gray-50 dark:bg-gray-900"
                                    style="border-radius: 0%; width: 100%">
                                    <mat-icon> more_vert </mat-icon>
                                </button>
                                <mat-menu #optionMenu>
                                    <button mat-menu-item (click)="view(ListItem)">
                                        <mat-icon class="mat-18">info</mat-icon>
                                        <span style="font-weight: 600">Info</span>
                                    </button>
                                </mat-menu>

                                <ng-container *ngFor="let col of columns">
                                    <div [class]="'flex flex-row items-center space-x-2 truncate pl-4 ' + col.class">

                                        <span *ngIf="col.iscolor" class="text-center justify-center"  [matTooltip]="ListItem[col.key]" [ngClass]="ListItem[col.key] == 'Confirmed' ? 'text-green-600' : ListItem[col.key] == 'Pending' ? 'text-blue-600' :'text-red-600'">
                                            {{ListItem[col.key]}}
                                        </span>

                                        <span *ngIf="col.isview" class="pr-2" (click)="view(ListItem)"  [matTooltip]="ListItem[col.key]">
                                            {{ListItem[col.key]}}
                                        </span>

                                        <span *ngIf="col.isamount" class="pr-2">
                                            {{ListItem.payment_currency}} {{ListItem[col.key]}}
                                        </span>
                                        
                                        <div class="flex flex-col truncate">
                                            <span class="truncate" [matTooltip]="col.tooltip ? ListItem[col.key] : ''" *ngIf="!col.iscolor && !col.isamount && !col.isview">
                                                {{ col.is_date ? (ListItem[col.key] | date: col.date_formate) || " - " : ListItem[col.key] || "  " }}
                                            </span>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </ng-container>
                    </ng-container>
                </div>
            </ng-container>

            <ng-template #noGridItems>
                <div class="p-8 sm:p-16 border-t text-3xl tracking-tight text-center pt-20">
                    {{getNodataText()}}
                </div>
            </ng-template>
        </div>

        <mat-paginator
            class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 max-sm:bottom-0 max-sm:fixed max-sm:inset-x-0 z-10 bg-white dark:bg-gray-900 dark:bg-opacity-5"
            [ngClass]="{ 'pointer-events-none': isLoading }"
            [length]="total"
            [pageSizeOptions]="appConfig.pageSizeOptions"
            [pageSize]="appConfig.pageSize"
            (page)="refreshItems()"
            [showFirstLastButtons]="appConfig.showFirstLastButtons"
        >
        </mat-paginator>
    </div>

</div>



<!--------Info--------->                                
<!-- 
<div class="w-400"  *ngIf="ListItem.show">
    <div class="grid grid-cols-5   mb-8 p-8  bg-card rounded-2xl overflow-hidden mx-10">
    <div class="contents mb-3" >
        <div class="  ">
            <span class="text-md font-semibold text-secondary">Payment Date - Audit Date</span>
            <div class="text-base truncate">
                {{(ListItem.payment_request_date | date: 'dd-MM-YYYY') }} - {{ (ListItem.audit_date_time | date: 'dd-MM-YYYY')}}
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">Status</span>
            <div class="text-base truncate"[ngClass]="ListItem.payment_status == 'Confirmed' ? 'text-green-600' : ListItem.payment_status == 'Pending' ? 'text-orange-500' :'text-red-600'">
                {{ListItem.payment_status || '-'}}
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">Ref. No.</span>
            <div class="text-base truncate">
                {{ListItem.payment_ref_no || '-'}}
                <mat-icon *ngIf="ListItem.payment_ref_no" class="icon-size-5 cursor-pointer ml-1" [matTooltip]="'Copy Link'" (click)="copyLink(ListItem.payment_ref_no)">content_copy</mat-icon>
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">Used For</span>
            <div class="text-base truncate">
                {{ListItem.service_for || '-'}}
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">To</span>
            <div class="text-base truncate">
                {{ListItem.payment_to|| '-'}}
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">From</span>
            <div class="text-base truncate">
                {{ListItem.payment_from || '-'}}
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">MOP</span>
            <div class="text-base truncate">
                {{ListItem.mode_of_payment || '-'}}
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">Transaction Ref. No.</span>
            <div class="text-base truncate">
                {{ListItem.transaction_ref_no || '-'}}
                <mat-icon *ngIf="ListItem.transaction_ref_no" class="icon-size-5 cursor-pointer ml-1" [matTooltip]="'Copy Link'" (click)="copyLink(ListItem.transaction_ref_no)">content_copy</mat-icon>
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">Supplier Currency</span>
            <div class="text-base truncate">
                {{ListItem.supplier_currency || '-'}}
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">Supplier Amount</span>
            <div class="text-base truncate">
                {{ListItem.supplier_amount || '-'}}
            </div>
        </div>
         <div class="  ">
            <span class="text-md font-semibold text-secondary">Payment Currency</span>
            <div class="text-base truncate">
                {{ListItem.payment_currency || '-'}}
            </div>
        </div> 
        <div class="  ">
            <span class="text-md font-semibold text-secondary">Payment Amount</span>
            <div class="text-base truncate">
                {{ListItem.payment_amount || '0'}}
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">ROE</span>
            <div class="text-base truncate">
                {{ListItem.roe || '-'}}
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">Remark</span>
            <div class="text-base truncate" [matTooltip]="ListItem.payment_remark">
                {{ListItem.payment_remark || '-'}}
            </div>
        </div>
        <div class="  ">
            <span class="text-md font-semibold text-secondary">Reject Reason</span>
            <div class="text-base truncate" [matTooltip]="ListItem.payment_reject_reason">
                {{ListItem.payment_reject_reason || '-'}}
            </div>
        </div>
    </div>
</div>

    </div> -->