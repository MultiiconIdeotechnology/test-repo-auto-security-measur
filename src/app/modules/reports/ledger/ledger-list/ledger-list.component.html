<div class="sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden dark:bg-transparent">

    <!-- Header -->
    <div
        class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-4 px-6 md:px-8 border-b">
        <!-- Title -->
        <div>
            <div class="text-3xl font-extrabold tracking-tight">{{module_name}}</div>
            <p class="text-primary leading-3 text-md">{{agentName}}</p>
        </div>
        <!-- Actions -->
        <div class="flex shrink-0 items-center mt-6 sm:mt-0 sm:ml-4">
            <!-- Search -->
            <mat-form-field class="fuse-mat-dense fuse-mat-rounded min-w-64" [subscriptSizing]="'dynamic'">
                <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:magnifying-glass'"></mat-icon>
                <input matInput [formControl]="searchInternalFilter" [autocomplete]="'off'" [placeholder]="'Search'">
            </mat-form-field>

            <!-- Add product button -->
            <button class="ml-4" mat-flat-button [color]="'primary'" (click)="filter()">
                <mat-icon class="w-10 h-10">filter_alt</mat-icon>
                <span class="">Filter</span>
            </button>

            <button mat-raised-button [color]="'primary'" [matMenuTriggerFor]="menu" class="ml-4">
                <mat-icon class="icon-size-6">more_vert</mat-icon>
            </button>
            <mat-menu #menu>
                <button mat-menu-item (click)="exportExcel()">
                    <mat-icon>arrow_downward</mat-icon>
                    <span>Export Excel</span>
                </button>
            </mat-menu>

            <button class="ml-4" mat-flat-button [disabled]="isLoading" (click)="refreshItems()" [color]="'primary'">
                <mat-icon class="icon-size-4.5" svgIcon="feather:refresh-ccw"></mat-icon>
            </button>
        </div>
    </div>



    <div class="flex flex-col flex-auto overflow-hidden">
        <!-- list -->
        <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden overflow-y-auto overflow-x-auto max-sm:pb-15">
            <ng-container>
                <div class="grid">
                    <!-- Header -->
                    <div class="tbl-grid gridwidth z-10 sticky top-0 grid gap-4 py-2 px-6 md:pr-8 pl-0 shadow text-md font-semibold  bg-card"
                        matSort matSortDisableClear (matSortChange)="refreshItems()">

                        <ng-container *ngFor="let col of columns">
                            <div *ngIf="col.is_sortable" [mat-sort-header]="col.key" [class]="'pl-4 ' + col.class">
                                {{col.name}}
                            </div>
                            <div *ngIf="!col.is_sortable" [class]="'pl-4 ' + col.class">
                                {{col.name}}
                            </div>
                        </ng-container>

                    </div>
                    <!-- Rows -->
                    <ng-container *ngIf="dataList.length > 0; else noGridItems">
                        <ng-container *ngFor="let ListItem of dataList">
                            <div class="tbl-grid gridwidth grid items-center gap-4 py-2 px-6 md:pr-8 border-b pl-0 ">

                                <ng-container *ngFor="let col of columns">
                                    <div
                                        [class]="'flex flex-row items-center   pl-4 ' + col.class + ' ' + col.row_class">
                                        <span *ngIf="col.isFix" class=" ">
                                            {{ListItem[col.key] != 0 ? ListItem[col.key].toFixed(2) : ListItem[col.key]
                                            || ' - '}}
                                        </span>
                                        <div class="flex flex-col">
                                            <span *ngIf="!col.isShow && !col.isFix && !col.isview" class=""
                                                [matTooltip]="col.tooltip ? ListItem[col.key] : ''">
                                                {{col.is_date ? ((ListItem[col.key] | date: col.date_formate) || ' - ')
                                                : ListItem[col.key] || ' - '}}
                                            </span>

                                            <!-- <span class="flex flex-row space-x-2 items-center" *ngIf="col.totalblc && col.name === 'Total Balance'">
                                                    <span *ngIf="!ListItem.countCredit">{{ListItem.countDebit|| ' 0 '}}</span>
                                                    <span *ngIf="ListItem.countCredit">{{ListItem.countCredit || ' 0 '}}</span>
                                            </span> -->

                                            <span *ngIf="col.isview" class="pr-2 cursor-pointer "
                                                (click)="view(ListItem)" [matTooltip]="ListItem[col.key]">
                                                {{ListItem[col.key]}}
                                            </span>

                                            <span *ngIf="col.isShow" class=" cursor-pointer  flex flex-col ">
                                                <p>{{ListItem[col.key] | date:'dd-MM-yyyy'}}</p>
                                                <p class="text-primary leading-3 text-xs">{{ListItem[col.key] |
                                                    date:'HH:mm'}}</p>
                                            </span>

                                            <!-- <span class="flex flex-row space-x-2 items-center" *ngIf="col.totalblc && col.name === 'Total Balance'" 
                                            [ngClass]="{'hidden': ListItem.find(x => x.particular === 'Closing Balance'), 'visible': !ListItem.find(x => x.particular === 'Closing Balance')}">
                                                <div >
                                                  <!-- <span *ngIf="ListItem.countCredit">{{ListItem.countCredit || ' 0 '}}</span>
                                                  <span *ngIf="!ListItem.countCredit">{{ListItem.countDebit || ' 0 '}}</span> -->
                                            <!-- </div>
                                            </span>  -->


                                        </div>

                                    </div>
                                </ng-container>

                            </div>

                        </ng-container>
                    </ng-container>
                </div>
            </ng-container>



            <ng-template #noGridItems>
                <div class="p-8 sm:p-16 border-t text-3xl tracking-tight text-center pt-20">
                    {{getNodataText()}}
                </div>
            </ng-template>

        </div>

        <mat-paginator
            class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 max-sm:bottom-0 max-sm:fixed max-sm:inset-x-0 z-10 bg-white dark:bg-gray-900 dark:bg-opacity-5"
            [ngClass]="{'pointer-events-none': isLoading}" [pageSizeOptions]="appConfig.pageSizeOptions"
            [pageSize]="appConfig.pageSize" (page)="setPaginator()"
            [showFirstLastButtons]="appConfig.showFirstLastButtons">
        </mat-paginator>

    </div>

</div>