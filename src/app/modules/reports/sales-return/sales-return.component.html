<div class="sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden dark:bg-transparent">

    <!-- Header -->
    <div
        class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-4 px-6 md:px-8   -b">
        <!-- Title -->
        <div class="text-3xl font-extrabold tracking-tight">{{module_name}}</div>
        <!-- Actions -->
        <div class="flex shrink-0 items-center mt-6 sm:mt-0 sm:ml-4">
            <!-- Search -->
            <mat-form-field class="fuse-mat-dense fuse-mat-rounded min-w-64" [subscriptSizing]="'dynamic'">
                <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:magnifying-glass'"></mat-icon>
                <input matInput [formControl]="searchInternalFilter" [autocomplete]="'off'" [placeholder]="'Search'">
            </mat-form-field>



            <!-- Add product button -->
            <button class="ml-4" mat-flat-button [color]="'primary'" (click)="filter()">
                <mat-icon class="w-10 h-10">filter_alt</mat-icon>
                <span class="">Filter</span>
            </button>

            <button mat-raised-button [color]="'primary'" [matMenuTriggerFor]="menu" class="ml-4">
                <mat-icon class="icon-size-6">more_vert</mat-icon>
            </button>
            <mat-menu #menu>
                <button mat-menu-item (click)="exportExcel()">
                    <mat-icon>arrow_downward</mat-icon>
                    <span>Export Excel</span>
                </button>
            </mat-menu>

            <button class="ml-4" mat-flat-button [disabled]="loading" (click)="refreshItems()" [color]="'primary'">
                <mat-icon class="icon-size-4.5" svgIcon="feather:refresh-ccw"></mat-icon>
            </button>
        </div>
    </div>



    <div class="flex flex-col flex-auto overflow-hidden ">
        <!-- list -->
        <div class="overflow-auto flex flex-col">
            <div class="flex flex-col overflow-auto max-w-full h-full rounded-b-lg"
               >
                <table mat-table [dataSource]="dataSource" class="sale-tab" matSort matSortDisableClear
                    matSortDirection="desc" matSortActive="booking_date" >
                    <ng-container matColumnDef="action" [sticky]="true">
                        <th mat-header-cell class="font-bold text-md text-center p-0  max-w-10 min-w-10" *matHeaderCellDef>#</th>
                        <td mat-cell *matCellDef="let element" class="  max-w-10 min-w-10 dark:bg-gray-900 bg-[#f8fafc]">
                            <div class="flex items-center justify-center">
                                <button mat-icon-button [matMenuTriggerFor]="optionMenu" class="sticky left-0">
                                    <mat-icon> more_vert </mat-icon>
                                </button>
                            </div>
                            <!-- <mat-menu #optionMenu>
                                <button mat-menu-item (click)="info(element)">
                                    <mat-icon class="mat-18">info</mat-icon>
                                    <span style="font-weight: 600">Info</span>
                                </button>
                                <mat-divider></mat-divider>
                            </mat-menu> -->
                        </td>
                    </ng-container>
    
                    <ng-container matColumnDef="agent">
                        <th mat-header-cell mat-sort-header class="font-bold text-md truncate min-w-36 max-w-36" *matHeaderCellDef>
                            Agent
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-36 max-w-36 truncate">
                            <span class="px-1 flex items-center rounded-md text-md truncate font-medium" [matTooltip]="element.agent">
                                <span class="truncate">{{ element.agent }}</span>
                            </span>
                        </td>
                    </ng-container>
                    
                    <ng-container matColumnDef="supplier">
                        <th mat-header-cell mat-sort-header class="font-bold text-md truncate min-w-36 max-w-36" *matHeaderCellDef>
                            Supplier
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-36 max-w-36 truncate">
                            <span class="px-1 flex items-center rounded-md text-md truncate font-medium" [matTooltip]="element.supplier">
                                <span class="truncate">{{ element.supplier }}</span>
                            </span>
                        </td>
                    </ng-container>
    
                    <ng-container matColumnDef="complete_date_time">
                        <th mat-header-cell mat-sort-header class="font-bold text-md truncate min-w-36 max-w-36"
                            *matHeaderCellDef>
                            Return Date time
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-36 max-w-36">
                            <p class="text-md font-medium truncate pr-1">
                                {{ (element.complete_date_time | date:'dd-MM-yyyy' || '-')}}
                            </p>
                        </td>
                    </ng-container>
    
                    <ng-container matColumnDef="amendment_ref_no">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-50" *matHeaderCellDef>
                            Amendment Ref No
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-50">
                            <p class="text-md font-medium pr-1 truncate" [matTooltip]="element.amendment_ref_no">
                                {{ element.amendment_ref_no || ' - ' }}
                            </p>
                        </td>
                    </ng-container>
    
                    <ng-container matColumnDef="air_ref_no">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-40" *matHeaderCellDef>
                            Air Ref No
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-40">
                            <p class="text-md  font-medium truncate pr-1" [matTooltip]="element.air_ref_no">
                                {{ element.air_ref_no }}
                            </p>
                        </td>
                    </ng-container>
    
                    <ng-container matColumnDef="amendment_type">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-44"
                            *matHeaderCellDef>
                            Amendment type
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-44">
                            <p class="text-md truncate font-medium" [matTooltip]="element.amendment_type">
                                {{ element.amendment_type }}
                            </p>
                        </td>
                    </ng-container>
    
                    <ng-container matColumnDef="pan_numner">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-32 max-w-32" *matHeaderCellDef>
                            Pan Number
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-32 max-w-32">
                            <p class="text-md truncate font-medium" [matTooltip]="element.pan_numner">
                                {{element.pan_numner || ' - '}}
                            </p>
                        </td>
                    </ng-container>
    
                    <ng-container matColumnDef="gst_numner">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-36" *matHeaderCellDef>
                            GST Numner
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-36">
                            <p class="text-md truncate font-medium" [matTooltip]="element.gst_numner">
                                {{element.gst_numner || ' - ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="sup_service_charge">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-40 max-w-40" *matHeaderCellDef>
                            Sup Service Charge
                        </th>
                        <td mat-cell *matCellDef="let element" class=" min-w-40 max-w-40">
                            <p class="text-md truncate font-medium">
                                {{element.sup_service_charge ? element.sup_service_charge.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="bonton_service_charge">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-42 max-w-42" *matHeaderCellDef>
                            Bonton Service Charge
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-42 max-w-42">
                            <p class="text-md truncate font-medium">
                                {{element.bonton_service_charge ? element.bonton_service_charge.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="refunded_amount">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-22 max-w-22" *matHeaderCellDef>
                            CGST
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-22 max-w-22">
                            <p class="text-md truncate font-medium">
                                {{element.cgst ? element.cgst.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="service_charge">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-36 max-w-36" *matHeaderCellDef>
                            Service Charge
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-36 max-w-36">
                            <p class="text-md truncate font-medium">
                                {{element.service_charge ? element.service_charge.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="tax">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-22 max-w-22" *matHeaderCellDef>
                            TAX
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-22 max-w-22">
                            <p class="text-md truncate font-medium">
                                {{element.tax ? element.tax.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="net_refund">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-28 max-w-28" *matHeaderCellDef>
                            Net Refund
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-28 max-w-28">
                            <p class="text-md truncate font-medium">
                                {{element.net_refund ? element.net_refund.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="commission">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-28 max-w-28" *matHeaderCellDef>
                            Commission
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-28 max-w-28">
                            <p class="text-md truncate font-medium">
                                {{element.commission ? element.commission.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="tds">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-22 max-w-22" *matHeaderCellDef>
                            TDS
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-22 max-w-22">
                            <p class="text-md truncate font-medium" >
                                {{element.tds ? element.tds.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="refundable_price">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-40 max-w-40" *matHeaderCellDef>
                            Refundable Price
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-40 max-w-40">
                            <p class="text-md truncate font-medium">
                                {{element.refundable_price ? element.refundable_price.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="commission_2">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-32 max-w-32" *matHeaderCellDef>
                            Commission 2
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-32 max-w-32">
                            <p class="text-md truncate font-medium">
                                {{element.commission_2 ? element.commission_2.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="tds_2">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-22 max-w-22" *matHeaderCellDef>
                            TDS 2
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-22 max-w-22">
                            <p class="text-md truncate font-medium">
                                {{element.tds_2 ? element.tds_2.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="net_commission">
                        <th mat-header-cell mat-sort-header
                            class="font-bold text-md truncate min-w-36 max-w-36" *matHeaderCellDef>
                            Net Commission
                        </th>
                        <td mat-cell *matCellDef="let element" class="min-w-36 max-w-36">
                            <p class="text-md truncate font-medium">
                                {{element.net_commission ? element.net_commission.toFixed(2) : ' 0 ' }}
                            </p>
                        </td>
                    </ng-container>
    
                    <tr class="h-9 min-h-9 sticky top-0  z-10" mat-header-row *matHeaderRowDef="columns; sticky: true"></tr>
                    <tr class="h-9 " mat-row *matRowDef="let row; columns: columns"></tr>
                </table>
            </div>
            
            <div *ngIf="dataSource.filteredData.length <= 0">
                <div class="p-8 sm:p-16  text-3xl tracking-tight text-center pt-20">
                    {{getNodataText()}}
                </div>
            </div>

            <mat-paginator class="absolute z-10  w-full bottom-0 border-t dark:bg-gray-900 " #_paginator
                [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="10"  showFirstLastButtons>
            </mat-paginator>
        </div>

    </div>

</div>