<div class="flex flex-col">
    <!-- Header -->
    <div class="flex flex-0 items-center justify-between h-16 p-6 bg-primary">
        <div class="text-lg font-medium text-white">{{ title }}</div>
        <button mat-icon-button (click)="matDialogRef.close()" [tabIndex]="-1">
            <mat-icon class="text-current text-white" [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>
        </button>
    </div>

    <form class="p-6" [formGroup]="formGroup">
        <mat-form-field class="w-full">
            <mat-label>Agent</mat-label>
            <mat-select [formControl]="agentListCtrl" multiple>
                <mat-option>
                    <ngx-mat-select-search [formControl]="agentSearchCtrl" placeholderLabel="Search agent..."
                        noEntriesFoundLabel="'No agent found'">
                    </ngx-mat-select-search>
                </mat-option>
                <mat-select-trigger>
                    {{ agentListCtrl.value?.[0]?.agency_name || '' }}
                    <span *ngIf="(agentListCtrl.value?.length || 0) > 1" class="example-additional-selection">
                        (+{{ (agentListCtrl.value?.length || 0) - 1 }} {{ agentListCtrl.value?.length === 2 ? 'other' :
                        'others' }})
                    </span>
                </mat-select-trigger>
                <mat-option *ngFor="let agent of filteredAgentList" [value]="agent">
                    <div class="flex align-items-center gap-1">
                        <div class="py-[8px]">
                            {{agent.code}} - {{agent.agency_name}}
                            <div class="text-sm text-slate-500 leading-none">{{agent.email_address}}</div>
                        </div>
                    </div>
                </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-checkbox formControlName="is_all_agent" color="primary">Select All Agents</mat-checkbox>
    </form>

    <div class="flex items-center justify-end pt-4 sm:mt-0 pr-6 pb-4 space-x-3">
        <!-- Discard -->
        <button mat-stroked-button (click)="matDialogRef.close()">Close</button>
        <!-- Save as draft -->
        <button mat-flat-button [color]="'primary'" (click)="submit()" [disabled]="!(formGroup.get('is_all_agent')?.value || selectedListIds?.length)">
            save
        </button>
    </div>
</div>