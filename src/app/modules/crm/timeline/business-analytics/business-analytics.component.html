<div class="flex flex-col flex-auto w-full">
    <div class="flex flex-wrap w-full max-w-screen-xl mx-auto">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 w-full">
            <div
                class="sm:col-span-2 lg:col-span-3 dark flex flex-col flex-auto rounded-2xl overflow-hidden mr-1 bg-card">
                <div class="flex items-center justify-between ml-4 mr-2 sm:mr-2">
                    <div class="w-full mt-[18px] flex flex-raw m-auto">
                        <div class="w-[100%]">
                            <div class="text-lg font-semibold tracking-tight leading-6 space-x-4">Business Performance
                            </div>
                        </div>
                        <div class="flex w-[30%]">
                            <div class="flex flex-row">
                                <mat-form-field class="flex-grow mr-2">
                                    <mat-select class="w-full flex-grow" [(ngModel)]="selectedService"
                                        (selectionChange)="changePAService($event)">
                                        <mat-option *ngFor="let service of serviceForList" [value]="service.value">{{
                                            service.viewValue
                                            }}</mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field class="flex-grow">
                                    <mat-select class="w-full flex-grow" [(ngModel)]="selectedYear"
                                        (selectionChange)="changePAYear($event)">
                                        <mat-option *ngFor="let service of yearForList" [value]="service.value">{{
                                            service.viewValue }}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col flex-auto h-full w-full mt-[-40px]"
                    *ngIf="chartVisitors && chartVisitors.chart">
                    <apx-chart class="flex-auto w-full h-full" [chart]="chartVisitors.chart"
                        [colors]="chartVisitors.colors" [dataLabels]="chartVisitors.dataLabels"
                        [fill]="chartVisitors.fill" [grid]="chartVisitors.grid" [series]="chartVisitors.series"
                        [yaxis]="chartVisitors.yaxis" [stroke]="chartVisitors.stroke" [tooltip]="chartVisitors.tooltip"
                        [xaxis]="chartVisitors.xaxis">
                    </apx-chart>
                </div>
            </div>
        </div>

        <div class="w-full mt-5 flex flex-raw m-auto justify-between">
            <div>
                <div class="text-lg font-semibold tracking-tight leading-6">Business Analytics</div>
                <div class="font-medium tracking-tight text-secondary mt-[2px]">Compare business analysis by all
                    category</div>
            </div>
            <div class="flex">
                <div class="flex flex-row">
                    <mat-form-field class="flex-grow mr-2">
                        <mat-select class="w-full flex-grow" [(ngModel)]="selectedBAService"
                            (selectionChange)="changeBAService($event)">
                            <mat-option *ngFor="let service of serviceForList" [value]="service.value">{{
                                service.viewValue
                                }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field class="flex-grow">
                        <mat-select class="w-full flex-grow" [(ngModel)]="selectedBAYear"
                            (selectionChange)="changeBAYear($event)">
                            <mat-option *ngFor="let service of yearForList" [value]="service.value">{{ service.viewValue
                                }}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-0 md:mt-2">
            <div
                class="flex flex-col flex-auto shadow field-blue-bg dark:bg-[#2A374A] bg-gray-200 rounded-2xl overflow-hidden p-5">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Platform</div>
                </div>
                <div class="flex flex-col flex-auto h-50 max-h-50"
                    *ngIf="chartPlatform && chartPlatform?.series.length > 0">
                    <apx-chart class="flex flex-auto items-center justify-center w-full h-full"
                        [chart]="chartPlatform?.chart" [colors]="chartPlatform?.colors" [labels]="chartPlatform?.labels"
                        [plotOptions]="chartPlatform?.plotOptions" [series]="chartPlatform?.series"
                        [states]="chartPlatform?.states" [tooltip]="chartPlatform?.tooltip"></apx-chart>

                    <div *ngIf="(chartPlatform?.series.length == 0)"
                        class="absolute opacity-70 flex flex-col pt-2 items-center justify-center">
                        <span class="font-light">No data!</span>
                    </div>
                </div>
                <div *ngIf="(chartPlatform?.series.length == 0)"
                    class="opacity-70 flex flex-col items-center justify-center py-16">
                    <span class="font-light">No data!</span>
                </div>
                <div class="mt-4">
                    <div class="-my-3 divide-y" *ngIf="selectedBAService == 'Volume'">
                        <ng-container *ngFor="let dataset of apiData?.platformWiseList; let i = index">
                            <!-- <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center text-left">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate" [matTooltip]="dataset?.platfrom">{{dataset?.platfrom}}
                                    </div>
                                </div>
                                <div class="font-medium text-right">{{dataset?.platfromAmt ? dataset?.platfromAmt :
                                    "-"}}</div>
                                <div class="text-right text-secondary">{{dataset?.percentage}}%</div>
                            </div> -->
                            <div class="flex flex-row py-3">
                                <div class="flex w-[50%] flex-row items-center">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">{{dataset?.platfrom}}
                                    </div>
                                </div>
                                <div class="font-medium text-right w-[40%] pr-7">{{dataset?.platfromAmt ?
                                    dataset?.platfromAmt :
                                    "-"}}</div>
                                <div class="text-right text-secondary w-[10%]">{{dataset?.percentage}}%</div>
                            </div>
                        </ng-container>
                    </div>

                    <div class="-my-3 divide-y" *ngIf="selectedBAService == 'Pax'">
                        <ng-container *ngFor="let dataset of apiData?.platformWisePax; let i = index">
                            <!-- <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center text-left">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate" [matTooltip]="dataset?.platform">{{dataset?.platform}}
                                    </div>
                                </div>
                                <div class="font-medium text-right">{{dataset?.pax ? dataset?.pax : "-"}}</div>
                                <div class="text-right text-secondary">{{dataset?.percentage}}%</div>
                            </div> -->
                            <div class="flex flex-row py-3">
                                <div class="flex w-[50%] flex-row items-center">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">{{dataset?.platform}}
                                    </div>
                                </div>
                                <div class="font-medium text-right w-[40%] pr-7">{{dataset?.pax ? dataset?.pax : "-"}}</div>
                                <div class="text-right text-secondary w-[10%]">{{dataset?.percentage}}%</div>
                            </div>
                        </ng-container>
                    </div>

                    <div class="-my-3 divide-y" *ngIf="selectedBAService == 'Bookings'">
                        <ng-container *ngFor="let dataset of apiData?.platformWiseList; let i = index">
                            <!-- <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center text-left">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate" [matTooltip]="dataset?.platfrom">{{dataset?.platfrom}}
                                    </div>
                                </div>
                                <div class="font-medium text-right">{{dataset?.booking ? dataset?.booking : "-"}}</div>
                                <div class="text-right text-secondary">{{dataset?.percentage}}%</div>
                            </div> -->
                            <div class="flex flex-row py-3">
                                <div class="flex w-[50%] flex-row items-center">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">{{dataset?.platfrom}}
                                    </div>
                                </div>
                                <div class="font-medium text-right w-[30%] pr-7">{{dataset?.booking ? dataset?.booking :
                                    "-"}}</div>
                                <div class="text-right text-secondary w-[10%]">{{dataset?.percentage}}%</div>
                            </div>
                        </ng-container>
                    </div>
                </div>
            </div>

            <div
                class="flex flex-col flex-auto field-blue-bg dark:bg-[#2A374A] bg-gray-200 shadow rounded-2xl overflow-hidden p-5">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Mode of Payment</div>
                </div>
                <div class="flex flex-col flex-auto max-h-50 h-50"
                    *ngIf="modeOfPayment && modeOfPayment?.series.length > 0">
                    <apx-chart class="flex flex-auto items-center justify-center w-full h-full"
                        [chart]="modeOfPayment?.chart" [colors]="modeOfPayment?.colors" [labels]="modeOfPayment?.labels"
                        [plotOptions]="modeOfPayment?.plotOptions" [series]="modeOfPayment?.series"
                        [states]="modeOfPayment?.states" [tooltip]="modeOfPayment?.tooltip"></apx-chart>

                    <div *ngIf="apiData?.paymentMethodWiseList?.length == 0"
                        class="absolute opacity-70 flex flex-col pt-2 items-center justify-center">
                        <span class="font-light">No data!</span>
                    </div>
                </div>
                <div *ngIf="(modeOfPayment?.series.length == 0)"
                    class="opacity-70 flex flex-col items-center justify-center py-16">
                    <span class="font-light">No data!</span>
                </div>
                <div class="mt-4">
                    <div class="-my-3 divide-y" *ngIf="selectedBAService == 'Volume'">
                        <ng-container *ngFor="let dataset of apiData?.paymentMethodWiseList; let i = index">
                            <!-- <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center text-left">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate" [matTooltip]="dataset?.modeOfPayment">
                                        {{dataset?.modeOfPayment}}</div>
                                </div>
                                <div class="font-medium text-right">{{dataset?.modeOfPaymentAmt ?
                                    dataset?.modeOfPaymentAmt : "-"}}</div>
                                <div class="text-right text-secondary">{{dataset?.percentage}}%</div>

                            </div> -->
                            <div class="flex flex-row py-3">
                                <div class="flex w-[50%] flex-row items-center">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">{{dataset?.modeOfPayment}}
                                    </div>
                                </div>
                                <div class="font-medium text-right w-[40%] pr-7">{{dataset?.modeOfPaymentAmt ?
                                    dataset?.modeOfPaymentAmt : "-"}}</div>
                                <div class="text-right text-secondary w-[10%]">{{dataset?.percentage}}%</div>
                            </div>
                        </ng-container>
                    </div>

                    <div class="-my-3 divide-y" *ngIf="selectedBAService == 'Pax'">
                        <ng-container *ngFor="let dataset of apiData?.paymentMethodWisePax; let i = index">
                            <!-- <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center text-left">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate" [matTooltip]="dataset?.paymentMethod">
                                        {{dataset?.paymentMethod}}</div>
                                </div>
                                <div class="font-medium text-right">{{dataset?.pax ? dataset?.pax : "-"}}</div>
                                <div class="text-right text-secondary">{{dataset?.percentage}}%</div>

                            </div> -->
                            <div class="flex flex-row py-3">
                                <div class="flex w-[50%] flex-row items-center">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">{{dataset?.paymentMethod}}
                                    </div>
                                </div>
                                <div class="font-medium text-right w-[40%] pr-7">{{dataset?.pax ? dataset?.pax : "-"}}</div>
                                <div class="text-right text-secondary w-[10%]">{{dataset?.percentage}}%</div>
                            </div>
                        </ng-container>
                    </div>

                    <div class="-my-3 divide-y" *ngIf="selectedBAService == 'Bookings'">
                        <ng-container *ngFor="let dataset of apiData?.paymentMethodWiseList; let i = index">
                            <!-- <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center text-left">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate" [matTooltip]="dataset?.modeOfPayment">
                                        {{dataset?.modeOfPayment}}</div>
                                </div>
                                <div class="font-medium text-right">{{dataset?.booking ? dataset?.booking : "-"}}</div>
                                <div class="text-right text-secondary">{{dataset?.percentage}}%</div>
                            </div> -->
                            <div class="flex flex-row py-3">
                                <div class="flex w-[50%] flex-row items-center">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">{{dataset?.modeOfPayment}}</div>
                                </div>
                                <div class="font-medium text-right w-[40%] pr-7">{{dataset?.booking ? dataset?.booking :
                                    "-"}}</div>
                                <div class="text-right text-secondary w-[10%]">{{dataset?.percentage}}%</div>
                            </div>
                        </ng-container>
                    </div>
                </div>
            </div>

            <div
                class="flex flex-col flex-auto shadow rounded-2xl overflow-hidden p-5 field-blue-bg dark:bg-[#2A374A] bg-gray-200">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Services</div>
                </div>
                <div class="flex flex-col flex-auto h-50 max-h-50"
                    *ngIf="chartService && chartService?.series.length > 0">
                    <apx-chart class="flex flex-auto items-center justify-center w-full h-full"
                        [chart]="chartService?.chart" [colors]="chartService?.colors" [labels]="chartService?.labels"
                        [plotOptions]="chartService?.plotOptions" [series]="chartService?.series"
                        [states]="chartService?.states" [tooltip]="chartService?.tooltip"></apx-chart>
                    <div *ngIf="apiData?.serviceWisePax?.length == 0 || apiData?.servicesWiseListing?.length == 0 || apiData?.servicesWiseListing?.length == 0"
                        class="absolute opacity-70 flex flex-col pt-2 items-center justify-center">
                        <span class="font-light">No data!</span>
                    </div>
                </div>
                <div *ngIf="(chartService?.series.length == 0)"
                    class="opacity-70 flex flex-col items-center justify-center py-16">
                    <span class="font-light">No data!</span>
                </div>
                <div class="mt-4">
                    <div class="-my-3 divide-y" *ngIf="selectedBAService == 'Volume'">
                        <ng-container *ngFor="let dataset of apiData?.servicesWiseListing; let i = index">
                            <!-- <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center text-left">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">
                                        {{dataset?.serviceType}}</div>
                                </div>
                                <div class="font-medium text-right">{{dataset?.amount ? dataset.amount: "-"}}</div>
                                <div class="text-right text-secondary">{{dataset?.percentage}}%</div>
                            </div> -->
                            <div class="flex flex-row py-3">
                                <div class="flex w-[50%] flex-row items-center">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">{{dataset?.serviceType}}
                                    </div>
                                </div>
                                <div class="text-right font-medium w-[40%] pr-7">{{dataset?.amount ? dataset?.amount : "-"}}
                                </div>
                                <div class="text-right text-secondary w-[10%]">{{dataset?.percentage}}%</div>
                            </div>
                        </ng-container>
                    </div>

                    <div class="-my-3 divide-y" *ngIf="selectedBAService == 'Pax'">
                        <ng-container *ngFor="let dataset of apiData?.serviceWisePax; let i = index">
                            <!-- <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center text-left">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">
                                        {{dataset?.serviceType}}</div>
                                </div>
                                <div class="font-medium text-right">{{dataset?.pax ? dataset?.pax : "-"}}</div>
                                <div class="text-right text-secondary">{{dataset?.percentage}}%</div>
                            </div> -->
                            <div class="flex flex-row py-3">
                                <div class="flex w-[50%] flex-row items-center">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">{{dataset?.serviceType}}
                                    </div>
                                </div>
                                <div class="text-right font-medium w-[40%] pr-7">{{dataset?.pax ? dataset?.pax : "-"}}</div>
                                <div class="text-right text-secondary w-[10%]">{{dataset?.percentage}}%</div>
                            </div>
                        </ng-container>
                    </div>

                    <div class="-my-3 divide-y" *ngIf="selectedBAService == 'Bookings'">
                        <ng-container *ngFor="let dataset of apiData?.servicesWiseListing; let i = index">
                            <!-- <div class="grid grid-cols-3 py-3">
                                <div class="flex items-center text-left">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">
                                        {{dataset?.serviceType}}</div>
                                </div>
                                <div class="font-medium text-right">{{dataset?.booking ? dataset?.booking : "-"}}</div>
                                <div class="text-right text-secondary">{{dataset?.percentage}}%</div>
                            </div> -->
                            <div class="flex flex-row py-3">
                                <div class="flex w-[50%] flex-row items-center">
                                    <div class="flex-0 w-2 h-2 rounded-full"
                                        [style.backgroundColor]=dataset?.backgroundColor></div>
                                    <div class="ml-2 truncate">{{dataset?.serviceType}}
                                    </div>
                                </div>
                                <div class="text-right font-medium w-[40%] pr-7">{{dataset?.booking ? dataset?.booking :
                                    "-"}}</div>
                                <div class="text-right text-secondary w-[10%]">{{dataset?.percentage}}%</div>
                            </div>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
