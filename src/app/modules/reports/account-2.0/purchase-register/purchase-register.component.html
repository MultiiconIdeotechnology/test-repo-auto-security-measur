<div class="sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden dark:bg-transparent">
    <!-- Header -->
    <div
        class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-4 px-6 md:px-8 border-b">
        <!-- Title -->
        <div class="text-3xl font-extrabold tracking-tight ">
            Purchase Register
        </div>
        <!-- Actions -->
        <div class="flex gap-3 shrink-0 items-center mt-6 sm:mt-0 sm:ml-4">
            <!------Global Search------>
            <div class="flex ctm_search">
                <input #inputRef matInput [formControl]="searchInputControl" [autocomplete]="'off'"
                    [placeholder]="'Search'" (keyup.enter)="onGlobalSearch(inputRef.value)" />
                <mat-icon class="icon-size-5 " matPrefix [svgIcon]="'heroicons_solid:magnifying-glass'"
                    (click)="onGlobalSearch(inputRef.value)"></mat-icon>
            </div>

            <!------column filter------>
            <button class=" rounded-full" mat-flat-button [color]="'primary'" matTooltip="Advanced Filter"
                [disabled]="isLoading" (click)="onColumnFilter()">
                <img *ngIf="!moduleMap[activeTab].isFiltershow" class="w-5 cursor-pointer pt-1"
                    src="assets/icons/filter-add.svg" alt="c">
                <img *ngIf="moduleMap[activeTab].isFiltershow" class="w-5 cursor-pointer pt-1"
                    src="assets/icons/filter-remove.svg" alt="c">
            </button>

            <!------Common Filter------->
            <button mat-flat-button [color]="'primary'" (click)="onSaveFilter()" matTooltip="Saved Filter"
                [disabled]="isLoading">
                <img class="w-6 h-auto cursor-pointer" src="assets/icons/common-filter.svg" alt="">
            </button>

            <!------Refresh------>
            <button mat-flat-button [color]="'primary'" matTooltip="Refresh" [disabled]="isLoading"
                (click)="onRefreshData()">
                <mat-icon class="icon-size-4.5" svgIcon="feather:refresh-ccw"></mat-icon>
            </button>

            <!----Export------>
            <button mat-raised-button [color]="'primary'" [matMenuTriggerFor]="menu">
                <mat-icon class="icon-size-6">more_vert</mat-icon>
            </button>
            <mat-menu #menu>
                <button mat-menu-item (click)="exportExcel()">
                    <mat-icon>arrow_downward</mat-icon>
                    <span>Export Excel</span>
                </button>
            </mat-menu>
        </div>
    </div>

    <div class="flex items-center gap-2 pt-4 px-6 border-b">
        <mat-form-field class="w-[250px]">
            <mat-date-range-input [rangePicker]="picker" (valueChange)="onDateRange($event)">
                <input matStartDate [formControl]="startDate" placeholder="Start Date" readonly #dateRangeStart />
                <input matEndDate [formControl]="endDate" placeholder="End Date" readonly #dateRangeEnd />
            </mat-date-range-input>
            <mat-datepicker-toggle #sec matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>

        <mat-form-field class="w-[250px]">
            <mat-select [(value)]="selectedTableKey" (valueChange)="onTableChange($event)">
                <mat-option *ngFor="let item of tableTypeList;" [value]="item">{{item.label}}</mat-option>
            </mat-select>
        </mat-form-field>

        <button *ngIf="tabLoaded.isTabTwoLoaded || isDateChange" class="translate-y-[-10px]" mat-flat-button [color]="'primary'" matTooltip="Refresh" [disabled]="isLoading"
            (click)="onRefreshCall()">
            <mat-icon class="icon-size-4.5" svgIcon="feather:refresh-ccw"></mat-icon>
        </button>
    </div>


    <!----------------Table----------------->
    <!-- *ngIf="activeTab == 0 && isApiCallAllowed"  -->
    <app-bonton #bontonTable 
    [hidden]="activeTab !== 0"
    [isFilterShow]="moduleMap[0].isFiltershow" 
    [startDate]="startDate" [endDate]="endDate"
    (isFilterShowEvent)="moduleMap[0].isFiltershow = $event">
    </app-bonton>

    <!-- *ngIf="activeTab == 1 && tabLoaded.isTabTwoLoaded && isApiCallAllowed"  -->
    <app-bonton-dmcc #dmccTable 
    [hidden]="activeTab !== 1" 
    *ngIf="tabLoaded.isTabTwoLoaded"
    [isFilterShow]="moduleMap[1].isFiltershow"
    [startDate]="startDate" [endDate]="endDate"
    (isFilterShowEvent)="moduleMap[1].isFiltershow = $event">
    </app-bonton-dmcc>
</div>

<app-manage-service-fee></app-manage-service-fee>
<app-amendment-request-entry></app-amendment-request-entry>