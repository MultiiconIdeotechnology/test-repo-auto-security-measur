<div class="flex flex-col">
    <!-- Header -->
    <div class="flex flex-0 items-center justify-between h-16 p-6 bg-primary">
        <div class="text-lg font-medium text-white">{{ title }}</div>
        <button mat-icon-button (click)="matDialogRef.close()" [tabIndex]="-1">
            <mat-icon class="text-current text-white" [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>
        </button>
    </div>

    <form [formGroup]="formGroup" class="p-6">
        <!-- FROM AGENT -->
        <mat-form-field class="w-full">
            <mat-label>From</mat-label>
            <mat-select formControlName="from_agent_id" required [compareWith]="compareWith">
                <mat-option>
                    <ngx-mat-select-search placeholderLabel="Search" noEntriesFoundLabel="No matching agent found"
                        [formControl]="formGroup.get('fromAgentfilter')">
                    </ngx-mat-select-search>
                </mat-option>
                <mat-option *ngFor="let ct of fromAgentList" [value]="ct.id" [disabled]="ct.disabled">
                    <span>
                        <span *ngIf="ct.code">{{ ct.code }} - </span>{{ ct.agency_name }}
                        <span *ngIf="ct.master_agent_name"> ({{ ct.master_agent_name }})</span>
                    </span>
                    <div class="-mt-2">
                        <span class="text-secondary text-sm">{{ ct.email_address }}</span>
                    </div>
                </mat-option>
            </mat-select>
        </mat-form-field>

        <!-- TO AGENT -->
        <mat-form-field class="w-full">
            <mat-label>To</mat-label>
            <mat-select formControlName="to_agent_id" required>
                <mat-option>
                    <ngx-mat-select-search placeholderLabel="Search" noEntriesFoundLabel="No matching agent found"
                        [formControl]="formGroup.get('toAgentfilter')">
                    </ngx-mat-select-search>
                </mat-option>
                <mat-option *ngFor="let to of toAgentList" [value]="to.id" [disabled]="to.disabled">
                    <span>
                        <span *ngIf="to.code">{{ to.code }} - </span>{{ to.agency_name }}
                        <span *ngIf="to.master_agent_name"> ({{ to.master_agent_name }})</span>
                    </span>
                    <div class="-mt-2">
                        <span class="text-secondary text-sm">{{ to.email_address }}</span>
                    </div>
                </mat-option>
            </mat-select>
        </mat-form-field>

    </form>

    <!-- ACTION BUTTON -->
    <div class="flex items-center justify-end pt-0 sm:mt-0 pr-6 pb-4 space-x-3">
        <button mat-flat-button color="primary" class="min-w-[200px]" [disabled]="formGroup.invalid || isLoading"
            (click)="confirmTransfer()">
            Transfer
        </button>
    </div>
</div>